"use strict";(self.webpackChunkgpx_viewer=self.webpackChunkgpx_viewer||[]).push([[284],{284:(t,e,n)=>{async function i(){await this.import(this.__LMOTION||"https://unpkg.com/leaflet.motion@0.3.2/dist/leaflet.motion.min.js","object"!=typeof L.Motion);let{runnerOptions:t}=this.options;return t=L.extend({polyline:{},motion:{},marker:void 0},"object"==typeof t?t:{}),this._registerTooltip({name:"here",marker:t=>L._("You are here: "),order:1}),this._registerTooltip({name:"distance",marker:t=>Math.round(t.dist)+" "+this.options.xLabel,order:2}),this.addCheckpoint=function(t){return this._registerCheckPoint({latlng:this._findItemForX(this._x(t.dist)).latlng,label:t.label||""})},this.addRunner=function(t){let e=this._x(t.dist),n=this._y(this._findItemForX(e).z);return d3.select(this._container).select("svg > g").append("svg:circle").attr("class","runner "+this.options.theme+" height-focus circle-lower").attr("r",6).attr("cx",e).attr("cy",n)},this.setPositionFromLatLng=function(t){this._onMouseMoveLayer({latlng:t})},this.tick=function(t,e=0,n=.1){e=e<=this.track_info.distance-n?e+n:0,this.updateRunnerPos(t,e),setTimeout((()=>this.tick(t,e)),150)},this.updateRunnerPos=function(t,e){let n,i;e instanceof L.LatLng?(n=this._findItemForLatLng(e),i=this._x(n.dist)):(i=this._x(e),n=this._findItemForX(i)),t.attr("cx",i).attr("cy",this._y(n.z)),this.setPositionFromLatLng(n.latlng)},this.animate=function(e,n=1500){this._runner&&this._runner.remove(),e.setStyle({opacity:.5});const i=L.geoJson(e.toGeoJSON(),{coordsToLatLng:t=>L.latLng(t[0],t[1],t[2]*(this.options.altitudeFactor||1))});this._runner=L.motion.polyline(i.toGeoJSON().features[0].geometry.coordinates,L.extend({},{color:"red",pane:"elevationPane",attribution:""},t.polyline),L.extend({},{auto:!0,speed:n},t.motion),t.marker||void 0),this._runner._drawMarker=new Proxy(this._runner._drawMarker,{apply:(t,e,n)=>(e._runner=e._runner||this.addRunner({dist:0}),this.updateRunnerPos(e._runner,n[0]),t.apply(e,n))}),this._runner.addTo(this._map)},{}}n.r(e),n.d(e,{Runner:()=>i})}}]);
//# sourceMappingURL=284.bundle.js.map