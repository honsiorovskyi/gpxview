{"version":3,"file":"126.bundle.js","mappings":"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","sources":["webpack://gpx-viewer/./node_modules/@raruto/leaflet-elevation/libs/leaflet-gpxgroup.min.js"],"sourcesContent":["L.Mixin.Selectable={includes:L.Mixin.Events,setSelected:function(s){var selected=!!s;this._selected!==selected&&(this._selected=selected,this.fire(\"selected\"))},isSelected:function(){return!!this._selected}},L.Mixin.Selection={includes:L.Mixin.Events,getSelection:function(){return this._selected},setSelection:function(item){this._selected===item?null!==item&&(item.setSelected(!item.isSelected()),item.isSelected()||(this._selected=null)):(this._selected&&this._selected.setSelected(!1),this._selected=item,this._selected&&this._selected.setSelected(!0)),this.fire(\"selection_changed\")}},L.Control.LayersLegend=L.Control.Layers.extend({_onInputClick:function(){this._handlingClick=!0,this._layerControlInputs.reduceRight((_,input)=>{if(input.checked)return this._map.fireEvent(\"legend_selected\",{layer:this._getLayer(input.layerId).layer,input:input},!0),input},0),this._handlingClick=!1,this._refocusOnMap()}}),L.control.layersLegend=(baseLayers,overlays,options)=>new L.Control.LayersLegend(baseLayers,overlays,options),L.GeoJSON.include(L.Mixin.Selectable),L.GpxGroup=L.Class.extend({options:{highlight:{color:\"#ff0\",opacity:1},points:[],points_options:{icon:{iconUrl:\"../images/elevation-poi.png\",iconSize:[12,12]}},flyToBounds:!0,legend:!1,legend_options:{position:\"topright\",collapsed:!1},elevation:!0,elevation_options:{theme:\"yellow-theme\",detached:!0,elevationDiv:\"#elevation-div\"},distanceMarkers:!0,distanceMarkers_options:{lazy:!0}},initialize:function(tracks,options){L.Util.setOptions(this,options),this._count=0,this._loadedCount=0,this._tracks=tracks,this._layers=L.featureGroup(),this._markers=L.featureGroup(),this._elevation=L.control.elevation(this.options.elevation_options),this._legend=L.control.layersLegend(null,null,this.options.legend_options),this.options.points.forEach(poi=>L.marker(poi.latlng,{icon:L.icon(this.options.points_options.icon)}).bindTooltip(poi.name,{direction:\"auto\"}).addTo(this._markers))},getBounds:function(){return this._layers.getBounds()},addTo:function(map){this._layers.addTo(map),this._markers.addTo(map),this._map=map,this.on(\"selection_changed\",this._onSelectionChanged,this),this._map.on(\"legend_selected\",this._onLegendSelected,this),this._tracks.forEach(this.addTrack,this)},addTrack:function(track){track instanceof Object?this._loadGeoJSON(track):fetch(track).then(response=>response.ok&&response.text()).then(text=>this._elevation._parseFromString(text)).then(geojson=>this._loadGeoJSON(geojson,track.split(\"/\").pop().split(\"#\")[0].split(\"?\")[0]))},_loadGeoJSON:function(geojson,fallbackName){geojson&&(geojson.name=geojson.name||geojson[0]&&geojson[0].properties.name||fallbackName,this._loadRoute(geojson))},_loadRoute:function(data){if(data){var line_style={color:this._uniqueColors(this._tracks.length)[this._count++],opacity:.75,weight:5,distanceMarkers:this.options.distanceMarkers_options},route=L.geoJson(data,{name:data.name||\"\",style:feature=>line_style,distanceMarkers:line_style.distanceMarkers,originalStyle:line_style,filter:feature=>\"Point\"!=feature.geometry.type});this._elevation.import(this._elevation.__LGEOMUTIL).then(()=>{route.addTo(this._layers),route.eachLayer(layer=>this._onEachRouteLayer(route,layer)),this._onEachRouteLoaded(route)})}},_onEachRouteLayer:function(route,layer){var polyline=layer;route.on(\"selected\",L.bind(this._onRouteSelected,this,route,polyline)),polyline.on(\"mouseover\",L.bind(this._onRouteMouseOver,this,route,polyline)),polyline.on(\"mouseout\",L.bind(this._onRouteMouseOut,this,route,polyline)),polyline.on(\"click\",L.bind(this._onRouteClick,this,route,polyline)),polyline.bindTooltip(route.options.name,{direction:\"auto\",sticky:!0})},_onEachRouteLoaded:function(route){this.options.legend&&this._legend.addBaseLayer(route,'<svg id=\"legend_'+route._leaflet_id+'\" width=\"25\" height=\"10\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"><line x1=\"0\" x2=\"50\" y1=\"5\" y2=\"5\" stroke=\"'+route.options.originalStyle.color+'\" fill=\"transparent\" stroke-width=\"5\" /></svg> '+route.options.name),this.fire(\"route_loaded\",{route:route}),++this._loadedCount===this._tracks.length&&(this.fire(\"loaded\"),this.options.flyToBounds&&this._map.flyToBounds(this.getBounds(),{duration:.25,easeLinearity:.25,noMoveStart:!0}),this.options.legend&&this._legend.addTo(this._map))},highlight:function(route,polyline){polyline.setStyle(this.options.highlight),this.options.distanceMarkers&&polyline.addDistanceMarkers()},unhighlight:function(route,polyline){polyline.setStyle(route.options.originalStyle),this.options.distanceMarkers&&polyline.removeDistanceMarkers()},_onRouteMouseOver:function(route,polyline){route.isSelected()||(this.highlight(route,polyline),this.options.legend&&(this.setSelection(route),L.DomUtil.get(\"legend_\"+route._leaflet_id).parentNode.previousSibling.click())),this.fire(\"route_mouseover\",{route:route,polyline:polyline})},_onRouteMouseOut:function(route,polyline){route.isSelected()||this.unhighlight(route,polyline),this.fire(\"route_mouseout\",{route:route,polyline:polyline})},_onRouteClick:function(route,polyline){this.setSelection(route)},_onRouteSelected:function(route,polyline){route.isSelected()||this.unhighlight(route,polyline)},_onSelectionChanged:function(e){var elevation=this._elevation,eleDiv=elevation.getContainer(),route=this.getSelection();elevation.clear(),route&&route.isSelected()?(eleDiv||elevation.addTo(this._map),route.getLayers().forEach((function(layer){layer instanceof L.Polyline&&(elevation.addData(layer,!1),layer.bringToFront())}))):eleDiv&&elevation.remove()},_onLegendSelected:function(e){var parent=e.input.closest(\".leaflet-control-layers-list\"),route=e.layer;if(!route.isSelected()){for(var i in this.setSelection(route),route._layers)this.highlight(route,route._layers[i]);this._map.flyToBounds(e.layer.getBounds())}parent.scroll({top:e.input.offsetTop-parent.offsetTop||0,behavior:\"smooth\"}),this._layers.eachLayer(layer=>{var legend=L.DomUtil.get(\"legend_\"+layer._leaflet_id);legend.querySelector(\"line\").style.stroke=layer.isSelected()?this.options.highlight.color:\"\",legend.parentNode.style.fontWeight=layer.isSelected()?\"700\":\"\"})},_uniqueColors:function(count){return 1===count?[\"#0000ff\"]:new Array(count).fill(null).map((_,i)=>this._hsvToHex(i*(1/count),1,.7))},_hsvToHex:function(h,s,v){var i=Math.floor(6*h),f=6*h-i,p=v*(1-s),q=v*(1-f*s),t=v*(1-(1-f)*s),rgb;return{0:[v,t,p],1:[q,v,p],2:[p,v,t],3:[p,q,v],4:[t,p,v],5:[v,p,q]}[i%6].map(d=>255*d).reduce((hex,byte)=>hex+(byte>>4&15).toString(16)+(15&byte).toString(16),\"#\")},removeFrom:function(map){this._layers.removeFrom(map)}}),L.GpxGroup.include(L.Mixin.Events),L.GpxGroup.include(L.Mixin.Selection),L.gpxGroup=(tracks,options)=>new L.GpxGroup(tracks,options);"],"names":["L","Mixin","Selectable","includes","Events","setSelected","s","selected","this","_selected","fire","isSelected","Selection","getSelection","setSelection","item","Control","LayersLegend","Layers","extend","_onInputClick","_handlingClick","_layerControlInputs","reduceRight","_","input","checked","_map","fireEvent","layer","_getLayer","layerId","_refocusOnMap","control","layersLegend","baseLayers","overlays","options","GeoJSON","include","GpxGroup","Class","highlight","color","opacity","points","points_options","icon","iconUrl","iconSize","flyToBounds","legend","legend_options","position","collapsed","elevation","elevation_options","theme","detached","elevationDiv","distanceMarkers","distanceMarkers_options","lazy","initialize","tracks","Util","setOptions","_count","_loadedCount","_tracks","_layers","featureGroup","_markers","_elevation","_legend","forEach","poi","marker","latlng","bindTooltip","name","direction","addTo","getBounds","map","on","_onSelectionChanged","_onLegendSelected","addTrack","track","Object","_loadGeoJSON","fetch","then","response","ok","text","_parseFromString","geojson","split","pop","fallbackName","properties","_loadRoute","data","line_style","_uniqueColors","length","weight","route","geoJson","style","feature","originalStyle","filter","geometry","type","import","__LGEOMUTIL","eachLayer","_onEachRouteLayer","_onEachRouteLoaded","polyline","bind","_onRouteSelected","_onRouteMouseOver","_onRouteMouseOut","_onRouteClick","sticky","addBaseLayer","_leaflet_id","duration","easeLinearity","noMoveStart","setStyle","addDistanceMarkers","unhighlight","removeDistanceMarkers","DomUtil","get","parentNode","previousSibling","click","e","eleDiv","getContainer","clear","getLayers","Polyline","addData","bringToFront","remove","parent","closest","i","scroll","top","offsetTop","behavior","querySelector","stroke","fontWeight","count","Array","fill","_hsvToHex","h","v","Math","floor","f","p","q","t","d","reduce","hex","byte","toString","removeFrom","gpxGroup"],"sourceRoot":""}