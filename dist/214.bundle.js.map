{"version":3,"file":"214.bundle.js","mappings":"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","sources":["webpack://gpx-viewer/./node_modules/@raruto/leaflet-elevation/libs/leaflet-ruler.js"],"sourcesContent":["/*\r\n * Copyright (c) 2022, GPL-3.0+ Project, Raruto\r\n *\r\n *  This file is free software: you may copy, redistribute and/or modify it\r\n *  under the terms of the GNU General Public License as published by the\r\n *  Free Software Foundation, either version 2 of the License, or (at your\r\n *  option) any later version.\r\n *\r\n *  This file is distributed in the hope that it will be useful, but\r\n *  WITHOUT ANY WARRANTY; without even the implied warranty of\r\n *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\r\n *  General Public License for more details.\r\n *\r\n *  You should have received a copy of the GNU General Public License\r\n *  along with this program.  If not, see .\r\n *\r\n * This file incorporates work covered by the following copyright and\r\n * permission notice:\r\n * \r\n *     Copyright (c) 2017 Goker Tanrisever\r\n *\r\n *     Permission to use, copy, modify, and/or distribute this software\r\n *     for any purpose with or without fee is hereby granted, provided\r\n *     that the above copyright notice and this permission notice appear\r\n *     in all copies.\r\n *\r\n *     THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL\r\n *     WARRANTIES WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED\r\n *     WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE\r\n *     AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR\r\n *     CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS\r\n *     OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT,\r\n *     NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN\r\n *     CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\r\n */\r\n\r\nL.Control.Ruler = L.Control.extend({\r\n\toptions: {\r\n\t\tposition: 'topright',\r\n\t\tcircleMarker: {\r\n\t\t\tcolor: 'red',\r\n\t\t\tradius: 2,\r\n\t\t},\r\n\t\tlineStyle: {\r\n\t\t\tcolor: 'red',\r\n\t\t\tdashArray: '1,6'\r\n\t\t},\r\n\t\tlengthUnit: {\r\n\t\t\tdisplay: 'km',\r\n\t\t\tdecimal: 2,\r\n\t\t\tfactor: 0.001, // meters -> kilometers\r\n\t\t\tlabel: 'Distance:'\r\n\t\t},\r\n\t\tangleUnit: {\r\n\t\t\tdisplay: '&deg;',\r\n\t\t\tdecimal: 2,\r\n\t\t\tfactor: 360,\r\n\t\t\tlabel: 'Bearing:'\r\n\t\t}\r\n\t},\r\n\tinitialize: function (options) {\r\n\t\tL.setOptions(this, options);\r\n\t\tthis._layers = L.layerGroup();\r\n\t\tthis._enabled = false;\r\n\t},\r\n\tonAdd: function (map) {\r\n\t\tthis._defaultCursor = map._container.style.cursor;\r\n\t\tthis._map = map;\r\n\t\tlet container = L.DomUtil.create('div', 'leaflet-bar');\r\n\t\tcontainer.classList.add('leaflet-ruler');\r\n\t\tL.DomEvent.disableClickPropagation(container);\r\n\t\tL.DomEvent.on(container, 'click', this._toggleMeasure, this);\r\n\t\treturn this._container = container;\r\n\t},\r\n\tonRemove: function () {\r\n\t\tL.DomEvent.off(this._container, 'click', this._toggleMeasure, this);\r\n\t},\r\n\t_attachMouseEvents: function () {\r\n\t\tlet map = this._map;\r\n\t\tmap.doubleClickZoom.disable();\r\n\t\tL.DomEvent.on(map._container, 'keydown', this._escape, this);\r\n\t\tL.DomEvent.on(map._container, 'dblclick', this._closePath, this);\r\n\t\tmap._container.style.cursor = 'crosshair';\r\n\t\tmap.on('click', this._addPoint, this);\r\n\t\tmap.on('mousemove', this._moving, this);\r\n\t},\r\n\t_removeMouseEvents: function () {\r\n\t\tlet map = this._map;\r\n\t\tmap.doubleClickZoom.enable();\r\n\t\tL.DomEvent.off(map._container, 'keydown', this._escape, this);\r\n\t\tL.DomEvent.off(map._container, 'dblclick', this._closePath, this);\r\n\t\tmap._container.style.cursor = this._defaultCursor;\r\n\t\tmap.off('click', this._addPoint, this);\r\n\t\tmap.off('mousemove', this._moving, this);\r\n\t},\r\n\t_disable: function () {\r\n\t\tthis._enabled = false;\r\n\t\tthis._container.classList.remove(\"leaflet-ruler-clicked\");\r\n\t\tthis._layers.remove().clearLayers();\r\n\t\tthis._latlngs = [];\r\n\t\tthis._totalLength = 0;\r\n\t\tthis._removeMouseEvents();\r\n\t},\r\n\t_enable: function () {\r\n\t\tthis._enabled = true;\r\n\t\tthis._container.classList.add(\"leaflet-ruler-clicked\");\r\n\t\tthis._circles = L.featureGroup().addTo(this._layers);\r\n\t\tthis._polyline = L.polyline([], this.options.lineStyle).addTo(this._layers);\r\n\t\tthis._layers.addTo(this._map);\r\n\t\tthis._latlngs = [];\r\n\t\tthis._totalLength = 0;\r\n\t\tthis._attachMouseEvents();\r\n\t},\r\n\t_toggleMeasure: function () {\r\n\t\tthis._enabled ? this._disable() : this._enable();\r\n\t},\r\n\t_drawTooltip: function (latlng, layer, incremental) {\r\n\t\tlet lastClick = this._latlngs[this._latlngs.length - 1] ?? latlng;\r\n\t\tlet bearing = this._calculateBearing(lastClick, latlng);\r\n\t\tlet distance = lastClick.distanceTo(latlng) * this.options.lengthUnit.factor;\r\n\t\tlet accumulated = this._totalLength + distance;\r\n\t\tlet totalLength = accumulated.toFixed(this.options.lengthUnit.decimal);\r\n\t\tlet plusLength = incremental ? '<br><div class=\"plus-length\">(+' + distance.toFixed(this.options.lengthUnit.decimal) + ')</div>' : '';\r\n\t\tthis._totalLength = incremental ? this._totalLength : accumulated;\r\n\t\tif (!layer.getTooltip()) layer.bindTooltip('', incremental ? { direction: \"auto\", sticky: true, offset: L.point(0, -40), className: 'moving-tooltip' } : { permanent: true, className: 'result-tooltip' }).openTooltip();\r\n\t\tlayer.setLatLng(latlng).setTooltipContent('<b>' + this.options.angleUnit.label + '</b>&nbsp;' + bearing.toFixed(this.options.angleUnit.decimal) + '&nbsp;' + this.options.angleUnit.display + '<br><b>' + this.options.lengthUnit.label + '</b>&nbsp;' + totalLength + '&nbsp;' + this.options.lengthUnit.display + plusLength);\r\n\t},\r\n\t_addPoint: function (e) {\r\n\t\tlet latlng = e.latlng || e;\r\n\t\tlet point = L.circleMarker(latlng, this.options.circleMarker).addTo(this._circles);\r\n\t\tthis._polyline.addLatLng(latlng);\r\n\t\tif(this._latlngs.length && !latlng.equals(this._latlngs[this._latlngs.length - 1])){\r\n\t\t\tthis._drawTooltip(latlng, point, false);\r\n\t\t}\r\n\t\tthis._latlngs.push(latlng);\r\n\t},\r\n\t_moving: function (e) {\r\n\t\tif (this._latlngs.length) {\r\n\t\t\tlet lastCLick = this._latlngs[this._latlngs.length - 1];\r\n\t\t\tif (!this._tempLine) this._tempLine = L.polyline([], this.options.lineStyle).addTo(this._map);\r\n\t\t\tif (!this._tempPoint) this._tempPoint = L.circleMarker(e.latlng, this.options.circleMarker).addTo(this._map);\r\n\t\t\tthis._tempLine.setLatLngs([lastCLick, e.latlng]);\r\n\t\t\tthis._drawTooltip(e.latlng, this._tempPoint, true);\r\n\t\t\tL.DomEvent.off(this._container, 'click', this._toggleMeasure, this);\r\n\t\t}\r\n\t},\r\n\t_escape: function (e) {\r\n\t\tif (e.keyCode === 27) {\r\n\t\t\tif (this._latlngs.length) {\r\n\t\t\t\tthis._closePath();\r\n\t\t\t} else {\r\n\t\t\t\tthis._enabled = true;\r\n\t\t\t\tthis._toggleMeasure();\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t_calculateBearing: function (start, end) {\r\n\t\tconst toRad = L.DomUtil.DEG_TO_RAD;\r\n\t\tconst toDeg = (this.options.angleUnit.factor / 2) / Math.PI;\r\n\t\tlet y = Math.sin((end.lng - start.lng) * toRad) * Math.cos(end.lat * toRad);\r\n\t\tlet x = Math.cos(start.lat * toRad) * Math.sin(end.lat * toRad) - Math.sin(start.lat * toRad) * Math.cos(end.lat * toRad) * Math.cos((end.lng - start.lng) * toRad);\r\n\t\treturn (Math.atan2(y, x) * toDeg + this.options.angleUnit.factor) % this.options.angleUnit.factor;\r\n\t},\r\n\t_closePath: function () {\r\n\t\tif (this._tempLine) {\r\n\t\t\tthis._tempLine.remove();\r\n\t\t\tthis._tempLine = null;\r\n\t\t}\r\n\t\tif (this._tempPoint) {\r\n\t\t\tthis._tempPoint.remove();\r\n\t\t\tthis._tempLine = null;\r\n\t\t}\r\n\t\tif (this._latlngs.length <= 1) {\r\n\t\t\tthis._circles.remove();\r\n\t\t}\r\n\t\tthis._enabled = false;\r\n\t\tL.DomEvent.on(this._container, 'click', this._toggleMeasure, this);\r\n\t\tthis._toggleMeasure();\r\n\t},\r\n});\r\nL.control.ruler = function (options) {\r\n\treturn new L.Control.Ruler(options);\r\n};  "],"names":["L","Control","Ruler","extend","options","position","circleMarker","color","radius","lineStyle","dashArray","lengthUnit","display","decimal","factor","label","angleUnit","initialize","setOptions","this","_layers","layerGroup","_enabled","onAdd","map","_defaultCursor","_container","style","cursor","_map","container","DomUtil","create","classList","add","DomEvent","disableClickPropagation","on","_toggleMeasure","onRemove","off","_attachMouseEvents","doubleClickZoom","disable","_escape","_closePath","_addPoint","_moving","_removeMouseEvents","enable","_disable","remove","clearLayers","_latlngs","_totalLength","_enable","_circles","featureGroup","addTo","_polyline","polyline","_drawTooltip","latlng","layer","incremental","lastClick","length","bearing","_calculateBearing","distance","distanceTo","accumulated","totalLength","toFixed","plusLength","getTooltip","bindTooltip","direction","sticky","offset","point","className","permanent","openTooltip","setLatLng","setTooltipContent","e","addLatLng","equals","push","lastCLick","_tempLine","_tempPoint","setLatLngs","keyCode","start","end","toRad","DEG_TO_RAD","toDeg","Math","PI","y","sin","lng","cos","lat","x","atan2","control","ruler"],"sourceRoot":""}