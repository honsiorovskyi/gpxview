"use strict";(self.webpackChunkgpx_viewer=self.webpackChunkgpx_viewer||[]).push([[716],{716:(t,e,a)=>{a.r(e),a.d(e,{Area:()=>r,Axis:()=>l,Bisect:()=>x,Chart:()=>y,CheckPoint:()=>g,Domain:()=>h,Grid:()=>o,LegendItem:()=>n,LegendSmall:()=>d,Path:()=>s,PositionMarker:()=>i,Range:()=>m,Ruler:()=>p,Scale:()=>u,Tooltip:()=>c});const r=({width:t,height:e,xAttr:a,yAttr:r,scaleX:s,scaleY:l,interpolation:o="curveLinear"})=>d3.area().curve("string"==typeof o?d3[o]:o).x((t=>t.xDiagCoord=s(t[a]))).y0(e).y1((t=>l(t[r]))),s=({name:t,color:e,strokeColor:a,strokeOpacity:r,fillOpacity:s,className:l=""})=>{let o=d3.create("svg:path");return t&&o.classed(t+" "+l,!0),o.style("pointer-events","none"),o.attr("fill",e||"#3366CC").attr("stroke",a||"#000").attr("stroke-opacity",r||"1").attr("fill-opacity",s||"0.8"),o},l=({type:t="axis",tickSize:e=6,tickPadding:a=3,position:r,height:s,width:l,axis:o,scale:i,ticks:n,tickFormat:d,label:c,labelX:p,labelY:g,name:h="",onAxisMount:m})=>u=>{let[x,y]=[0,0];"bottom"==r&&(y=s),"right"==r&&(x=l),"x"==o&&"grid"==t?e=-s:"y"==o&&"grid"==t&&(e=-l);let f=d3["axis"+r.replace(/\b\w/g,(t=>t.toUpperCase()))]().scale(i).ticks("function"==typeof n?n():n).tickPadding(a).tickSize(e).tickFormat(d),v=u.append("g").attr("class",[o,t,r,h].join(" ")).attr("transform","translate("+x+","+y+")").call(f);return c&&v.append("svg:text").attr("x",p).attr("y",g).text(c),m&&v.call(m),v},o=t=>(t.type="grid",l(t)),i=({theme:t,xCoord:e=0,yCoord:a=0,labels:r={},item:s={},length:l=0})=>o=>{o.attr("class","height-focus-group");let i,n=o.select(".height-focus.line"),d=o.select(".height-focus.circle-lower"),c=o.select(".height-focus-label");return n.node()||(n=o.append("svg:line")),d.node()||(d=o.append("svg:circle")),c.node()||(c=o.append("svg:text")),isNaN(e)||isNaN(a)||(d.attr("class",t+" height-focus circle-lower").attr("transform","translate("+e+","+a+")").attr("r",6).attr("cx",0).attr("cy",0),n.attr("class",t+" height-focus line").attr("x1",e).attr("x2",e).attr("y1",a).attr("y2",l),c.attr("class",t+" height-focus-label").style("pointer-events","none").attr("x",e+5).attr("y",l),Object.keys(r).sort(((t,e)=>r[t].order-r[e].order)).forEach((t=>{i=c.select(".height-focus-"+r[t].name),i.size()||(i=c.append("svg:tspan").attr("class","height-focus-"+r[t].name).attr("dy","1.5em")),i.text("function"!=typeof r[t].value?r[t].value:r[t].value(s))})),c.select("tspan").attr("dy",c.selectAll("tspan").size()>1?"-1.5em":"0em"),c.selectAll("tspan").attr("x",e+5)),o},n=({name:t,label:e,width:a,height:r,margins:s={},color:l,path:o,className:i=""})=>n=>(n.attr("class","legend-item legend-"+t.toLowerCase()).attr("data-name",t),n.on("click.legend",(()=>d3.select(n.node().ownerSVGElement||n).dispatch("legend_clicked",{detail:{path:o.node(),name:t,legend:n.node(),enabled:!o.classed("leaflet-hidden")}}))),n.append("svg:rect").attr("x",a/2-50).attr("y",r+s.bottom/2).attr("width",50).attr("height",10).attr("fill",l).attr("stroke","#000").attr("stroke-opacity","0.5").attr("fill-opacity","0.25").attr("class",i),n.append("svg:text").text(L._(e||t)).attr("x",a/2+5).attr("font-size",10).style("font-weight","700").attr("y",r+s.bottom/2).attr("dy","0.75em"),n),d=({width:t,height:e,items:a,onClick:r})=>s=>{let l=0;s.data([{x:t,y:e+40}]).attr("transform",(t=>"translate("+t.x+","+t.y+")")).classed("legend-switcher");let o=s.append("svg:text").attr("class","legend-switcher-label").attr("text-anchor","end").attr("x",-25).attr("y",5).on("mousedown",((t,e)=>n(L.Util.wrapNum(l+1,[0,a.length])))),i=s.selectAll(".legend-switcher-symbol").data([{type:d3.symbolTriangle,x:0,y:3,angle:0,size:50,id:"down"},{type:d3.symbolTriangle,x:-13,y:0,angle:180,size:50,id:"up"}]);i.exit().remove(),o.exit().remove(),i.enter().append("svg:path").attr("class","legend-switcher-symbol").attr("cursor","pointer").attr("fill","#000").merge(i).attr("d",d3.symbol().type((t=>t.type)).size((t=>t.size))).attr("transform",(t=>"translate("+t.x+","+t.y+") rotate("+t.angle+")")).on("mousedown",((t,e)=>n(L.Util.wrapNum("up"===e.id?l+1:l-1,[0,a.length]))));const n=t=>{l=t,o.text(a.length?L._(a[l][0].toUpperCase()+a[l].slice(1)):""),r(a[l])};return n(0),s},c=({xCoord:t,yCoord:e,width:a,height:r,labels:s={},item:l={}})=>o=>{let i=o.select(".mouse-focus-line"),n=o.select(".mouse-focus-label");i.node()||(i=o.append("svg:line")),n.node()||(n=o.append("g"));let d=n.select(".mouse-focus-label-rect"),c=n.select(".mouse-focus-label-text");d.node()||(d=n.append("svg:rect")),c.node()||(c=n.append("svg:text"));let p,g=0,h=0,m={width:0,height:0};try{m=c.node().getBBox()}catch(t){return o}return t&&(g=t+(t<a/2?10:-m.width-10)),e&&(h=Math.max(e-m.height,L.Browser.webkit?0:-1/0)),i.attr("class","mouse-focus-line").attr("x2",t).attr("y2",0).attr("x1",t).attr("y1",r),n.attr("class","mouse-focus-label"),d.attr("class","mouse-focus-label-rect").attr("x",g-5).attr("y",h-5).attr("width",m.width+10).attr("height",m.height+10).attr("rx",3).attr("ry",3),c.attr("class","mouse-focus-label-text").style("font-weight","700").attr("y",h),Object.keys(s).sort(((t,e)=>s[t].order-s[e].order)).forEach((t=>{p=c.select(".mouse-focus-label-"+s[t].name),p.size()||(p=c.append("svg:tspan",".mouse-focus-label-x").attr("class","mouse-focus-label-"+s[t].name).attr("dy","1.5em")),p.text("function"!=typeof s[t].value?s[t].value:s[t].value(l))})),c.select("tspan").attr("dy","1em"),c.selectAll("tspan").attr("x",g),o},p=({height:t,width:e})=>a=>{a.data([{x:0,y:t}]).attr("transform",(t=>"translate("+t.x+","+t.y+")"));let r=a.selectAll(".horizontal-drag-rect").data([{w:e}]),s=a.selectAll(".horizontal-drag-line").data([{w:e}]),l=a.selectAll(".horizontal-drag-label").data([{w:e-8}]),o=a.selectAll(".horizontal-drag-symbol").data([{type:d3.symbolTriangle,x:e+7,y:0,angle:-90,size:50}]);return r.exit().remove(),s.exit().remove(),l.exit().remove(),o.exit().remove(),r.enter().append("svg:rect").attr("class","horizontal-drag-rect").attr("x",0).attr("y",-8).attr("height",8).attr("fill","none").attr("pointer-events","all").merge(r).attr("width",(t=>t.w)),s.enter().append("svg:line").attr("class","horizontal-drag-line").attr("x1",0).merge(s).attr("x2",(t=>t.w)),l.enter().append("svg:text").attr("class","horizontal-drag-label").attr("text-anchor","end").attr("y",-8).merge(l).attr("x",(t=>t.w)),o.enter().append("svg:path").attr("class","horizontal-drag-symbol").merge(o).attr("d",d3.symbol().type((t=>t.type)).size((t=>t.size))).attr("transform",(t=>"translate("+t.x+","+t.y+") rotate("+t.angle+")")),a},g=({point:t,height:e,width:a,x:r,y:s})=>l=>(isNaN(r)||isNaN(s)||(t.item&&t.item.property("isConnected")||(t.position=t.position||"bottom",t.item=l.append("g"),t.item.append("svg:line").attr("y1",0).attr("x1",0).attr("style","stroke: rgb(51, 51, 51); stroke-width: 0.5; stroke-dasharray: 2, 2;"),t.item.append("svg:circle").attr("class"," height-focus circle-lower").attr("r",3),t.label&&t.item.append("svg:text").attr("dx","4px").attr("dy","-4px")),t.item.datum({pos:t.position,x:r,y:s}).attr("class",(t=>"point "+t.pos)).attr("transform",(t=>"translate("+t.x+","+t.y+")")),t.item.select("line").datum({y2:{top:-s,bottom:e-s}[t.position],x2:{left:-r,right:a-r}[t.position]||0}).attr("y2",(t=>t.y2)).attr("x2",(t=>t.x2)),t.label&&t.item.select("text").text(t.label)),l),h=({min:t,max:e,attr:a,name:r,forceBounds:s,scale:l})=>function(o){a=l&&l.attr||a||r;let i=o&&o.length?d3.extent(o,(t=>t[a])):[0,1];return void 0!==t&&(t<i[0]||s)&&(i[0]=t),void 0!==e&&(e>i[1]||s)&&(i[1]=e),i},m=({axis:t})=>function(e,a){return"x"==t?[0,e]:"y"==t?[a,0]:void 0},u=({data:t,attr:e,min:a,max:r,forceBounds:s,range:l})=>d3.scaleLinear().range(l).domain(h({min:a,max:r,attr:e,forceBounds:s})(t)),x=({data:t=[0,1],scale:e,x:a,attr:r})=>d3.bisector((t=>t[r])).left(t,e.invert(a)),y=({width:t,height:e,margins:a={},ruler:r})=>{const s=t-a.left-a.right,l=e-a.top-a.bottom,o=d3.create("svg:svg").attr("class","background"),i=o.append("svg:defs"),n=o.append("g"),d={grid:n.append("g").attr("class","grid"),area:n.append("g").attr("class","area"),axis:n.append("g").attr("class","axis"),point:n.append("g").attr("class","point"),brush:n.append("g").attr("class","brush"),tooltip:n.append("g").attr("class","tooltip").attr("display","none"),ruler:n.append("g").attr("class","ruler"),legend:n.append("g").attr("class","legend")},g=d.area.append("svg:mask").attr("id","elevation-clipper-"+Math.random().toString(36).substr(2,9)).attr("fill-opacity",1),h=g.append("svg:rect").attr("class","zoom").attr("fill","white"),m=d.area.append("svg:foreignObject").attr("mask","url(#"+g.attr("id")+")"),x=m.append("xhtml:canvas").attr("class","canvas-plot"),y=x.node().getContext("2d");d.tooltip.call(c({xCoord:0,yCoord:0,height:l,width:s,labels:{}}));let f=d3.brushX().on("start.cursor end.cursor brush.cursor",(()=>d.brush.select(".overlay").attr("cursor",null))),v={defs:i,mask:g,canvas:x,context:y,brush:f},b={svg:o,g:n,panes:d,utils:v,scale:t=>({x:u(t.x),y:u(t.y)}),_resize:({width:t,height:e,margins:a={},ruler:r})=>{const s=t-a.left-a.right,l=e-a.top-a.bottom;o.attr("width",t).attr("height",e).attr("viewBox",`0 0 ${t} ${e}`),n.attr("transform","translate("+a.left+","+a.top+")"),/Mac|iPod|iPhone|iPad/.test(navigator.platform)&&/AppleWebkit/i.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&x.style("transform","translate("+a.left+"px,"+a.top+"px)"),h.attr("width",s).attr("height",l).attr("x",0).attr("y",0),m.attr("width",s).attr("height",l),x.attr("width",s).attr("height",l),r&&d.ruler.call(p({height:l,width:s})),d.brush.call(f.extent([[0,0],[s,l]])),d.brush.select(".overlay").attr("cursor",null),b._width=s,b._height=l,b.svg.dispatch("resize",{detail:{width:s,height:l}})},pane:t=>d[t]||(d[t]=n.append("g").attr("class",t)),get:t=>v[t]};return b._resize({width:t,height:e,margins:a}),b}}}]);
//# sourceMappingURL=716.bundle.js.map