"use strict";(self.webpackChunkgpx_viewer=self.webpackChunkgpx_viewer||[]).push([[219],{219:(t,e,a)=>{function n(){if(!this.options.linearGradient)return{};const t=L.Control.Elevation.Utils,{preferCanvas:e}=this.options,{attr:a,path:n,range:r,min:i,max:o}=L.extend({attr:"z",path:"altitude",range:{0:"#008800",.5:"#ffff00",1:"#ff0000"},min:"elevation_min",max:"elevation_max"},!0===this.options.linearGradient?{}:this.options.linearGradient),s=n+"-gradient-"+t.randomId(),l="legend-"+s;return this.on("elechart_axis",(()=>{if(!this._data.length)return;const t=this._chart,l=t._paths[n],{defs:d}=t._chart.utils,c=function({range:t,min:e,max:a,depth:n=256}){const r=document.createElement("canvas"),i=r.getContext("2d"),o=i.createLinearGradient(0,0,0,n);r.width=1,r.height=n;for(let e in t)o.addColorStop(e,t[e]);i.fillStyle=o,i.fillRect(0,0,1,n);const{data:s}=i.getImageData(0,0,1,n);return{getRGBColor(t){const r=4*Math.floor(Math.min(Math.max((t-e)/(a-e),0),.999)*n);return"rgb("+[s[r],s[r+1],s[r+2]].join(",")+")"}}}({min:isFinite(this.track_info[i])?this.track_info[i]:0,max:isFinite(this.track_info[o])?this.track_info[o]:1,range:r});let h;e?l.__fillStyle=h=t._context.createLinearGradient(0,0,t._width(),0):(d.select("#"+s).remove(),h=d.append("svg:linearGradient").attr("id",s),h.addColorStop=function(t,e){h.append("svg:stop").attr("offset",t).attr("stop-color",e)},l.attr("fill","url(#"+s+")").classed("area",!1));for(let t=0,e=this._data;t<e.length;t++)h.addColorStop(t/e.length,c.getRGBColor(e[t][a]))})),this.on("elechart_updated",(()=>{const t=this._chart,{defs:e}=t._chart.utils;e.select("#"+l).remove();const a=e.append("svg:linearGradient").attr("id",l);Object.keys(r).sort().forEach((t=>a.append("svg:stop").attr("offset",t).attr("stop-color",r[t]))),t._container.select(".legend-"+n+" > rect").attr("fill","url(#"+l+")").classed("area",!1)})),{}}a.r(e),a.d(e,{LinearGradient:()=>n})}}]);
//# sourceMappingURL=219.bundle.js.map