{"version":3,"file":"27.bundle.js","mappings":"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","sources":["webpack://gpx-viewer/./node_modules/@raruto/leaflet-elevation/libs/leaflet-edgescale.js"],"sourcesContent":["/*\r\n * Copyright (c) 2023, GPL-3.0+ Project, Raruto\r\n *\r\n *  This file is free software: you may copy, redistribute and/or modify it\r\n *  under the terms of the GNU General Public License as published by the\r\n *  Free Software Foundation, either version 2 of the License, or (at your\r\n *  option) any later version.\r\n *\r\n *  This file is distributed in the hope that it will be useful, but\r\n *  WITHOUT ANY WARRANTY; without even the implied warranty of\r\n *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\r\n *  General Public License for more details.\r\n *\r\n *  You should have received a copy of the GNU General Public License\r\n *  along with this program.  If not, see .\r\n *\r\n * This file incorporates work covered by the following copyright and\r\n * permission notice:\r\n * \r\n *     Copyright (c) GPL-3.0+ Project  - 2018- Dražen Tutić - https://github.com/dtutic/Leaflet.EdgeScaleBar\r\n *     Copyright (c) MIT License (MIT) - 2015- Xisco Guaita - https://github.com/xguaita/Leaflet.MapCenterCoord\r\n */\r\n\r\n/**\r\n * Original source: https://github.com/xguaita/Leaflet.MapCenterCoord\r\n */\r\nL.Control.EdgeScale = L.Control.extend({\r\n  \r\n  // Defaults\r\n  options: {\r\n    position: 'bottomleft',\r\n    icon: true,\r\n    coords: true,\r\n    bar: true,\r\n    onMove: true,\r\n    template: '{y} | {x}', // https://en.wikipedia.org/wiki/ISO_6709\r\n    projected: false,\r\n    formatProjected: '#.##0,000',\r\n    latlngFormat: 'DD', // DD, DM, DMS\r\n    latlngDesignators: true,\r\n    latLngFormatter: undefined,\r\n    iconStyle: {\r\n      background: `url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xml:space='preserve' viewBox='0 0 100 100'%3E%3Cg stroke='%23fff'%3E%3Ccircle cx='50' cy='50.2' r='3.9' stroke-width='2' /%3E%3Cpath stroke-width='3' d='M5 54h32a4 4 0 1 0 0-8H5a4 4 0 1 0 0 8z M54 5a4 4 0 1 0-8 0v32a4 4 0 1 0 8 0V5z M99 50c0-2-2-4-4-4H63a4 4 0 1 0 0 8h32c2 0 4-1 4-4zM46 95a4 4 0 1 0 8 0V64a4 4 0 1 0-8 0v31z'/%3E%3C/g%3E%3C/svg%3E%0A\")`,\r\n      width:      '24px',\r\n      height:     '24px',\r\n      left:       'calc(50% - 12px)',\r\n      top:        'calc(50% - 12px)',\r\n      content:    '',\r\n      display:    'block',\r\n      position:   'absolute',\r\n      zIndex:     999,\r\n      pointerEvents: 'none',\r\n    },\r\n    containerStyle: {\r\n      backgroundColor: 'rgba(255, 255, 255, 0.7)',\r\n      boxShadow:       '0 0 5px #bbb',\r\n      borderRadius:    '3px',\r\n      padding:         '3px 2px',\r\n      color:           '#333',\r\n      font:            '11px/1.5 Consolas, monaco, monospace',\r\n      writingMode:     'vertical-lr',\r\n    },\r\n  },\r\n\r\n  initialize: function(options) {\r\n    L.setOptions(this, options);\r\n  },\r\n\r\n  onAdd: function (map) {\r\n\r\n    if (this.options.bar) {\r\n      this._scaleBar = (new L.Control.EdgeScale.Layer(true === this.options.bar ? {} : this.options.bar)).addTo(map);\r\n    }\r\n\r\n    // create a DOM element and put it into overlayPane\r\n    if (this.options.icon) {\r\n      this._icon = L.DomUtil.create('div', 'leaflet-crosshair');\r\n      Object.assign(this._icon.style, this.options.iconStyle);\r\n      map.getContainer().insertBefore(this._icon, map.getContainer().firstChild);\r\n    }\r\n\r\n    // Control container\r\n    this._container = L.DomUtil.create('div', 'leaflet-control-mapcentercoord');\r\n\r\n    Object.assign(this._container.style, this.options.containerStyle);\r\n\r\n    if (!this.options.coords) {\r\n      this._container.style.display = 'none';\r\n    }\r\n\r\n    L.DomEvent.disableClickPropagation(this._container);\r\n\r\n    this._container.innerHTML = this._getMapCenterCoord();\r\n\r\n    // Add events listeners for updating coordinates & icon's position\r\n    map.on('move', this._onMapMove, this);\r\n    map.on('moveend', this._onMapMove, this);\r\n\r\n    return this._container;\r\n  },\r\n\r\n  onRemove: function (map) {\r\n    if (this.options.bar) {\r\n      this._scaleBar.remove();\r\n    }\r\n\r\n    // remove icon's DOM elements and listeners\r\n    if (this.options.icon) {\r\n      map.getContainer().removeChild(this._icon);\r\n    }\r\n    map.off('move', this._onMapMove, this);\r\n    map.off('moveend', this._onMapMove, this);\r\n  },\r\n\r\n  // update coordinates\r\n  _onMapMove: function (e) {\r\n    if (this.options.onMove || 'moveend' === e.type) {\r\n      this._container.innerHTML = this._getMapCenterCoord();\r\n    }\r\n  },\r\n\r\n  _getMapCenterCoord: function () {\r\n    const center = this._map.getCenter();\r\n    return this.options.projected\r\n      ? this._getProjectedCoord(this._map.options.crs.project(center))\r\n      : this._getLatLngCoord(center);\r\n  },\r\n\r\n  _getProjectedCoord: function (center) {\r\n    return L.Util.template(\r\n      this.options.template,\r\n      {\r\n        x: this._format(this.options.formatProjected, center.x),\r\n        y: this._format(this.options.formatProjected, center.y)\r\n      }\r\n    );\r\n  },\r\n\r\n  _getLatLngCoord: function (latLng) {\r\n\r\n    const { latLngFormatter, latlngFormat, latlngDesignators: designators } = this.options;\r\n\r\n    if (undefined !== latLngFormatter ) {\r\n      return latLngFormatter(latLng.lat, latLng.lng);\r\n    }\r\n\r\n    let lat, lng, deg, min;\r\n\r\n    // make a copy of center so we aren't affecting leaflet's internal state\r\n    let center = {\r\n      lat: latLng.lat,\r\n      lng: latLng.lng,\r\n      lng_neg: latLng.lng < 0,\r\n      lat_neg: latLng.lat < 0, \r\n    };\r\n\r\n    // 180 degrees & negative\r\n    if (center.lng < 0) {\r\n      center.lng = Math.abs(center.lng);\r\n    }\r\n    if (center.lng > 180) {\r\n      center.lng = 360 - center.lng;\r\n      center.lng_neg = !center.lng_neg;\r\n    }\r\n    if (center.lat < 0) {\r\n      center.lat = Math.abs(center.lat);\r\n    }\r\n\r\n    // format\r\n    if ('DM' === latlngFormat) {\r\n      deg = parseInt(center.lng);\r\n      lng = deg + 'º ' + this._format('00.000', (center.lng - deg) * 60) + \"'\";\r\n      deg = parseInt(center.lat);\r\n      lat = deg + 'º ' + this._format('00.000', (center.lat - deg) * 60) + \"'\";\r\n    } else if ('DMS' === latlngFormat) {\r\n      deg = parseInt(center.lng);\r\n      min = (center.lng - deg) * 60;\r\n      lng = deg + 'º ' + this._format('00', parseInt(min)) + \"' \" + this._format('00.0', (min - parseInt(min)) * 60) + \"''\";\r\n      deg = parseInt(center.lat);\r\n      min = (center.lat - deg) * 60;\r\n      lat = deg + 'º ' + this._format('00', parseInt(min)) + \"' \" + this._format('00.0', (min - parseInt(min)) * 60) + \"''\";\r\n    } else { // 'DD'\r\n      lng = this._format('#0.00000', center.lng) + 'º';\r\n      lat = this._format('##0.00000', center.lat) + 'º';\r\n    }\r\n\r\n    return L.Util.template(this.options.template, {\r\n      x: (!designators && center.lng_neg ? '-' : '') + lng + (designators ? (center.lng_neg ? ' W' : ' E') : ''),\r\n      y: (!designators && center.lat_neg ? '-' : '') + lat + (designators ? (center.lat_neg ? ' S' : ' N') : '')\r\n    });\r\n  },\r\n\r\n  /**\r\n   * IntegraXor Web SCADA - JavaScript Number Formatter\r\n   * \r\n   * @see https://code.google.com/p/javascript-number-formatter\r\n   * @authors KPL, KHL \r\n   */\r\n  _format: function (m, v) {\r\n    if (!m || isNaN(+v)) {\r\n      return v;                                                    // return as it is.\r\n    }\r\n\r\n    v = m.charAt(0) == '-' ? -v : +v;                              // convert any string to number according to formation sign.\r\n    let isNegative = v < 0 ? v = -v : 0;                           // process only abs(), and turn on flag.\r\n\r\n    let result = m.match(/[^\\d\\-\\+#]/g);                           // search for separator for grp & decimal, anything not digit, not +/- sign, not #.\r\n    let Decimal = (result && result[result.length - 1]) || '.';    // treat the right most symbol as decimal\r\n    let Group = (result && result[1] && result[0]) || ',';         // treat the left most symbol as group separator\r\n\r\n    m = m.split(Decimal);                                          // split the decimal for the format string if any.\r\n    v = v.toFixed(m[1] && m[1].length);                            // Fix the decimal first, toFixed will auto fill trailing zero.\r\n    v = +(v) + '';                                                 // convert number to string to trim off *all* trailing decimal zero(es)\r\n\r\n    let pos_trail_zero = m[1] && m[1].lastIndexOf('0');            // fill back any trailing zero according to format (look for last zero in format)\r\n    let part = v.split('.');\r\n\r\n    if (!part[1] || part[1] && part[1].length <= pos_trail_zero) { // integer will get !part[1]\r\n      v = (+v).toFixed(pos_trail_zero + 1);\r\n    }\r\n    let szSep = m[0].split(Group);                                 // look for separator\r\n    m[0] = szSep.join('');                                         // join back without separator for counting the pos of any leading 0.\r\n\r\n    let pos_lead_zero = m[0] && m[0].indexOf('0');\r\n    if (pos_lead_zero > -1) {\r\n      while (part[0].length < (m[0].length - pos_lead_zero)) {\r\n        part[0] = '0' + part[0];\r\n      }\r\n    } else if (+part[0] == 0) {\r\n      part[0] = '';\r\n    }\r\n    v = v.split('.');\r\n    v[0] = part[0];\r\n\r\n    var pos_separator = (szSep[1] && szSep[szSep.length - 1].length); // process the first group separator from decimal (.) only, the rest ignore. Get the length of the last slice of split result.\r\n    if (pos_separator) {\r\n      let integer = v[0];\r\n      let str = '';\r\n      let offset = integer.length % pos_separator;\r\n      for (let i = 0, l = integer.length; i < l; i++) {\r\n        str += integer.charAt(i);                                  // ie6 only support charAt for sz.\r\n        if (\r\n          !((i - offset + 1) % pos_separator) &&\r\n          i < l - pos_separator                                    // -pos_separator so that won't trail separator on full length\r\n        ) {\r\n          str += Group;\r\n        }\r\n      }\r\n      v[0] = str;\r\n    }\r\n\r\n    v[1] = (m[1] && v[1]) ? Decimal + v[1] : \"\";\r\n    return (isNegative ? '-' : '') + v[0] + v[1];                  // put back any negation and combine integer and fraction.\r\n  }\r\n\r\n});\r\n\r\n/**\r\n * Original Source: https://github.com/dtutic/Leaflet.EdgeScaleBar\r\n * \r\n * Draws the metric scale bars in Web Mercator map along top and right edges. \r\n * Authors: Dražen Tutić (dtutic@geof.hr), Ana Kuveždić Divjak (akuvezdic@geof.hr)\r\n * University of Zagreb, Faculty of Geodesy, GEOF-OSGL Lab\r\n *  Inspired by LatLonGraticule Leaflet plugin by: lanwei@cloudybay.com.tw\r\n */\r\nL.Control.EdgeScale.Layer = L.Layer.extend({\r\n\r\n  includes: L.Evented ? L.Evented.prototype : L.Mixin.Events,\r\n\r\n  options: {\r\n      opacity: 1,\r\n      weight: 0.8,\r\n      gradient: {\r\n        size: 10,\r\n        opacity: 0.5,\r\n      }, \r\n      color: '#000',\r\n      font: '11px Arial',\r\n      zoomInterval: [\r\n          {start: 0, end: 2, interval: 5000000},\r\n          {start: 3, end: 3, interval: 2000000},\r\n          {start: 4, end: 4, interval: 1000000},\r\n          {start: 5, end: 5, interval: 500000},\r\n          {start: 6, end: 7, interval: 200000},\r\n          {start: 8, end: 8, interval: 100000},\r\n          {start: 9, end: 9, interval: 50000},\r\n          {start: 10, end: 10, interval: 20000},\r\n          {start: 11, end: 11, interval: 10000},\r\n          {start: 12, end: 12, interval: 5000},\r\n          {start: 13, end: 13, interval: 2000},\r\n          {start: 14, end: 14, interval: 1000},\r\n          {start: 15, end: 15, interval: 500},\r\n          {start: 16, end: 16, interval: 200},\r\n          {start: 17, end: 17, interval: 100},\r\n          {start: 18, end: 18, interval: 50},\r\n          {start: 19, end: 19, interval: 20},\r\n          {start: 20, end: 20, interval: 10}\r\n      ],\r\n      pane: 'edgescalePane'\r\n  },\r\n\r\n  initialize: function (options) {\r\n\r\n    L.setOptions(this, options);\r\n\r\n    // Constants of the WGS84 ellipsoid needed to calculate meridian length or latitute\r\n    const a   = this._a   = 6378137.0;\r\n    const b   = this._b   = 6356752.3142;\r\n    const n   = this._n   = (a - b)/(a + b);\r\n    const a2  = a * a;\r\n    const b2  = b * b;\r\n    const n2  = n * n;\r\n    const n3  = n2 * n;\r\n    const n4  = n3 * n;\r\n    const n5  = n4 * n;\r\n    this._A   = a * (1.0 - n) * (1.0 - n2) * (1.0 + 9.0/4.0 * n2 + 225.0/64.0 * n4);\r\n    this._e2  = (a2 - b2) / a2;\r\n    this._ic1 = 1.5 * n - 29.0/12.0 * n3 + 553.0/80.0 * n5;\r\n    this._ic2 = 21.0/8.0 * n2 - 1537.0/128.0 * n4;\r\n    this._ic3 = 151.0/24.0 * n3 - 32373.0/640.0 * n5;\r\n    this._ic4 = 1097.0/64.0 * n4;\r\n    this._ic5 = 8011.0/150.0 * n5;\r\n    this._c1  = -1.5 * n + 31.0/24.0 * n3 - 669.0/640.0 * n5;\r\n    this._c2  = 15.0/18.0 * n2 - 435.0/128.0 * n4;\r\n    this._c3  = -35.0/12.0 * n3 + 651.0/80.0 * n5;\r\n    this._c4  = 315.0/64.0 * n4;\r\n    this._c5  = -693.0/80.0 * n5;\r\n\r\n    // Latitude limit of the Web Mercator projection\r\n    this._LIMIT_PHI = 1.484419982;\r\n  },\r\n\r\n  onAdd: function (map) {\r\n    this._map = map;\r\n\r\n    let pane                   = map.getPane(this.options.pane);\r\n    if (!pane) {\r\n      pane = this._pane        = map.createPane('edgescalePane', map.getPane('norotatePane') || map.getPane('mapPane'));\r\n      pane.style.zIndex        = 625; // This pane is above markers but below popups.\r\n      pane.style.pointerEvents = 'none';\r\n    }\r\n\r\n    this._pane = pane;\r\n\r\n    // if (this._renderer) this._renderer.remove()\r\n    // this._renderer               = L.canvas({ pane: \"edgescalePane\" }).addTo(this._map); // default leaflet svg renderer\r\n\r\n    if (!this._canvas) {\r\n      this._initCanvas();\r\n    }\r\n\r\n    this._pane.appendChild(this._canvas);\r\n\r\n    map.on('viewreset', this._reset, this);\r\n    map.on('move', this._reset, this);\r\n    map.on('moveend', this._reset, this);\r\n    map.on('rotate', this._reset, this);\r\n\r\n    this._reset();\r\n  },\r\n\r\n  onRemove: function (map) {\r\n    this._pane.removeChild(this._canvas);\r\n\r\n    map.off('viewreset', this._reset, this);\r\n    map.off('move', this._reset, this);\r\n    map.off('moveend', this._reset, this);\r\n  },\r\n\r\n  addTo: function (map) {\r\n    map.addLayer(this);\r\n    return this;\r\n  },\r\n\r\n  setOpacity: function (opacity) {\r\n    this.options.opacity = opacity;\r\n    L.DomUtil.setOpacity(this._canvas, this.options.opacity);\r\n    return this;\r\n  },\r\n\r\n  bringToFront: function () {\r\n    if (this._canvas) {\r\n        this._pane.appendChild(this._canvas);\r\n    }\r\n    return this;\r\n  },\r\n\r\n  bringToBack: function () {\r\n    if (this._canvas) {\r\n      this._pane.insertBefore(this._canvas, pane.firstChild);\r\n    }\r\n    return this;\r\n  },\r\n\r\n  _initCanvas: function () {\r\n    this._canvas = L.DomUtil.create('canvas', '');\r\n    this._ctx = this._canvas.getContext('2d');\r\n\r\n    this.setOpacity();\r\n\r\n    L.extend(this._canvas, {\r\n      onselectstart: L.Util.falseFn,\r\n      onmousemove: L.Util.falseFn,\r\n      onload: L.bind(this._onCanvasLoad, this)\r\n    });\r\n  },\r\n\r\n  _reset: function () {\r\n    var canvas = this._canvas,\r\n        size = this._map.getSize();\r\n\r\n    this._setCanvasPosition();\r\n\r\n    canvas.width  = size.x;\r\n    canvas.height = size.y;\r\n    canvas.style.width  = size.x + 'px';\r\n    canvas.style.height = size.y + 'px';\r\n\r\n    /**\r\n     * @TODO add support for \"leaflet-rotate\"\r\n     */\r\n    if (this._map._bearing) {\r\n      return;\r\n    }\r\n\r\n    const { gradient } = this.options;\r\n\r\n    // horizontal gradient\r\n    if (!this._hor_gradient) {\r\n      this._hor_gradient = this._ctx.createLinearGradient(0, 0, 0, gradient.size);\r\n      this._hor_gradient.addColorStop(0,\"rgba(255, 255, 255, \" + gradient.opacity + \")\");\r\n      this._hor_gradient.addColorStop(1,\"rgba(255, 255, 255, 0)\");\r\n    }\r\n    this._ctx.fillStyle = this._hor_gradient;\r\n    this._ctx.fillRect(0, 0, size.x, gradient.size);\r\n\r\n    // vertical gradient\r\n    if (!this._vert_gradient) {\r\n      this._vert_gradient = this._ctx.createLinearGradient(0, 0, gradient.size, 0);\r\n      this._vert_gradient.addColorStop(0,\"rgba(255, 255, 255, \" + gradient.opacity + \")\");\r\n      this._vert_gradient.addColorStop(1,\"rgba(255, 255, 255, 0)\");\r\n    }\r\n    this._ctx.fillStyle = this._vert_gradient;\r\n    this._ctx.fillRect(0, 0, gradient.size, size.y);\r\n\r\n    this._ctx.beginPath();\r\n    this._ctx.moveTo(0,0);\r\n    this._ctx.lineTo(size.x,0);\r\n    this._ctx.lineTo(size.x,size.y);\r\n    this._ctx.stroke();\r\n\r\n    this._calcInterval();\r\n    this._draw();\r\n  },\r\n\r\n  _onCanvasLoad: function () {\r\n    this.fire('load');\r\n  },\r\n\r\n  _calcInterval: function() {\r\n    const { zoomInterval } = this.options;\r\n    const zoom = this._map.getZoom();\r\n\r\n    if (undefined !== zoomInterval) {\r\n      // Manually set scale using a custom this.options.zoomInterval object\r\n      for (const idx in zoomInterval) {\r\n        const dict = zoomInterval[idx];\r\n        if (dict.start <= zoom && dict.end && dict.end >= zoom) {\r\n          this._interval = dict.interval;\r\n          break;\r\n        }\r\n      }\r\n    } else {\r\n      // Autamatically get current scale using L.Control.Scale\r\n      // Source: https://gis.stackexchange.com/a/198444\r\n      this._interval = L.Control.Scale.prototype._getRoundNum(\r\n        this._map\r\n          .containerPointToLatLng([0, this._map.getSize().y / 2 ])\r\n          .distanceTo(\r\n            this._map.containerPointToLatLng([L.Control.Scale.prototype.options.maxWidth, this._map.getSize().y / 2 ]\r\n          )\r\n        )\r\n      );\r\n    }\r\n\r\n    this._currZoom = zoom;\r\n\r\n  },\r\n\r\n  _draw: function() {\r\n    this._ctx.strokeStyle = this.options.color;    \r\n    this._create_lat_ticks();\r\n    this._create_lon_ticks();\r\n\r\n    this._ctx.fillStyle = this.options.color;\r\n    this._ctx.font      = this.options.font;\r\n\r\n    const size = this._map.getSize();\r\n    const text = this._interval >= 1000 ? (this._interval / 1000 + ' km') : this._interval + ' m';    \r\n\r\n    this._ctx.textAlign    = 'left';\r\n    this._ctx.textBaseline = 'middle'; \r\n    this._ctx.fillText(text, +12, size.y / 2);\r\n\r\n    this._ctx.textAlign    = 'center';\r\n    this._ctx.textBaseline = 'top'; \r\n    this._ctx.fillText(text, size.x / 2, 12);\r\n  },\r\n\r\n  _create_lat_ticks: function() {\r\n    const { weight } = this.options;\r\n    const size       = this._map.getSize();\r\n    const to_rad     = Math.PI/180.0;\r\n    const center     = this._merLength(this._map.containerPointToLatLng(L.point(0, size.y / 2)).lat * to_rad);\r\n    const top        = this._merLength(this._map.containerPointToLatLng(L.point(0,0)).lat * to_rad);\r\n    const bottom     = this._merLength(this._map.containerPointToLatLng(L.point(0, size.y)).lat * to_rad);\r\n        \r\n    // draw major ticks    \r\n    for (let i = center + this._interval / 2; i < top; i = i + this._interval) {\r\n      const phi = this._invmerLength(i);\t\t\t\r\n      if ((phi < this._LIMIT_PHI) && (phi > -this._LIMIT_PHI)) {\r\n        this._draw_lat_tick(phi, 10, weight * 1.5);\r\n      }\r\n    }\r\n    for (let i = center - this._interval / 2; i > bottom; i = i - this._interval) {\r\n      const phi = this._invmerLength(i);\t\t\t\r\n      if ((phi > -this._LIMIT_PHI) && (phi < this._LIMIT_PHI)) {\r\n        this._draw_lat_tick(phi, 10, weight * 1.5);\r\n      }\r\n    }\r\n\r\n    // draw minor ticks    \r\n    for (let i = center; i < top; i = i + this._interval / 10.0) {\r\n      const phi = this._invmerLength(i);\t\t\t\r\n      if ((phi < this._LIMIT_PHI) && (phi > -this._LIMIT_PHI)) {\r\n        this._draw_lat_tick(phi, 4, weight);\r\n      }\r\n    }\r\n    for (let i = center - this._interval / 10; i > bottom; i = i - this._interval / 10.0) {\r\n      const phi = this._invmerLength(i);\t\t\t\r\n      if ((phi > -this._LIMIT_PHI) && (phi < this._LIMIT_PHI)) {\r\n        this._draw_lat_tick(phi, 4, weight);\r\n      }\r\n    }\r\n  },\r\n\r\n  _create_lon_ticks: function() {\r\n    const { weight } = this.options;\r\n    const size       = this._map.getSize();\r\n    const to_rad     = Math.PI/180.0;\r\n    const to_deg     = 180.0/Math.PI;\r\n    const center     = this._map.containerPointToLatLng(L.point(size.x / 2, 0));\r\n    const left       = this._map.containerPointToLatLng(L.point(0, 0));\r\n    const right      = this._map.containerPointToLatLng(L.point(size.x, 0));\r\n    const sinPhi2    = Math.pow(Math.sin(center.lat * to_rad), 2);\r\n    const N          = this._a / Math.sqrt(1.0 - this._e2 * sinPhi2);\r\n    const dl         = this._interval / (N * Math.cos(center.lat * to_rad)) * to_deg;\r\n        \r\n    // draw major ticks\r\n    for (let i = center.lng + dl / 2; i < right.lng; i = i + dl) this._draw_lon_tick(i, 10, weight * 1.5);\r\n    for (let i = center.lng - dl / 2; i > left.lng;  i = i - dl) this._draw_lon_tick(i, 10, weight * 1.5);\r\n    \r\n    // draw minor ticks\r\n    for (let i = center.lng;           i < right.lng; i = i + dl / 10) this._draw_lon_tick(i, 4, weight);\r\n    for (let i = center.lng - dl / 10; i > left.lng;  i = i - dl / 10) this._draw_lon_tick(i, 4, weight);\r\n  },\r\n\r\n  _setCanvasPosition: function() {\r\n    let lt = this._map.containerPointToLayerPoint([0, 0]);\r\n    /**\r\n     * @TODO add support for \"leaflet-rotate\"\r\n     */\r\n    if (this._map._bearing) {\r\n      lt = this._map.rotatedPointToMapPanePoint(\r\n        this._map.containerPointToLayerPoint(L.point(this._map._container.getBoundingClientRect()))\r\n      );\r\n    }\r\n    L.DomUtil.setPosition(this._canvas, lt);\r\n  },\r\n\r\n  _latLngToCanvasPoint: function (latlng) {\r\n    return L.point(\r\n      this._map\r\n        .project(L.latLng(latlng))\r\n        ._subtract(this._map.getPixelOrigin())\r\n      ).add(this._map._getMapPanePos()); \r\n  },\r\n\r\n  _draw_lat_tick: function (phi, lenght, weight) {\r\n    const to_deg = 180.0/Math.PI;\r\n    const size   = this._map.getSize();\r\n    const y      = this._latLngToCanvasPoint(L.latLng(phi * to_deg, 0.0)).y;\r\n    this._ctx.lineWidth = weight;\r\n    this._ctx.beginPath();\r\n    this._ctx.moveTo(0, y);\r\n    this._ctx.lineTo(+ lenght, y);\r\n    this._ctx.stroke();\r\n  },\r\n\r\n  _draw_lon_tick: function(lam, lenght, weight) {\r\n    const x = this._latLngToCanvasPoint(L.latLng(0.0, lam)).x;\r\n    this._ctx.lineWidth = weight;\r\n    this._ctx.beginPath();\r\n    this._ctx.moveTo(x, 0);\r\n    this._ctx.lineTo(x, lenght);\r\n    this._ctx.stroke();\r\n  },\r\n\r\n  _merLength: function(phi) {\r\n    const cos2 = Math.cos(2.0 * phi);\r\n    const sin2 = Math.sin(2.0 * phi); \r\n    return this._A * (phi + sin2 * (this._c1 + (this._c2 + (this._c3 + (this._c4 + this._c5 * cos2) * cos2) *cos2) * cos2));\r\n  },\r\n\r\n  _invmerLength: function(s) {\r\n    const psi = s/this._A;\r\n    const cos2 = Math.cos(2.0 * psi);\r\n    const sin2 = Math.sin(2.0 * psi); \r\n    return psi + sin2 * (this._ic1 + (this._ic2 + (this._ic3 + (this._ic4 + this._ic5 * cos2) * cos2) * cos2) * cos2);\r\n  },\r\n});\r\n\r\nL.control.edgeScale = function (options) {\r\n  return new L.Control.EdgeScale(options);\r\n};\r\n\r\nL.Map.mergeOptions({\r\n  edgeScaleControl: false\r\n});\r\n\r\nL.Map.addInitHook(function () {\r\n  if (this.options.edgeScaleControl) {\r\n    this.edgeScaleControl = new L.Control.EdgeScale();\r\n    this.addControl(this.edgeScaleControl);\r\n  }\r\n});"],"names":["L","Control","EdgeScale","extend","options","position","icon","coords","bar","onMove","template","projected","formatProjected","latlngFormat","latlngDesignators","latLngFormatter","undefined","iconStyle","background","width","height","left","top","content","display","zIndex","pointerEvents","containerStyle","backgroundColor","boxShadow","borderRadius","padding","color","font","writingMode","initialize","setOptions","this","onAdd","map","_scaleBar","Layer","addTo","_icon","DomUtil","create","Object","assign","style","getContainer","insertBefore","firstChild","_container","DomEvent","disableClickPropagation","innerHTML","_getMapCenterCoord","on","_onMapMove","onRemove","remove","removeChild","off","e","type","center","_map","getCenter","_getProjectedCoord","crs","project","_getLatLngCoord","Util","x","_format","y","latLng","designators","lat","lng","deg","min","lng_neg","lat_neg","Math","abs","parseInt","m","v","isNaN","isNegative","charAt","result","match","Decimal","length","Group","split","toFixed","pos_trail_zero","lastIndexOf","part","szSep","join","pos_lead_zero","indexOf","pos_separator","integer","str","offset","i","l","includes","Evented","prototype","Mixin","Events","opacity","weight","gradient","size","zoomInterval","start","end","interval","pane","a","_a","b","_b","n","_n","a2","b2","n2","n3","n4","n5","_A","_e2","_ic1","_ic2","_ic3","_ic4","_ic5","_c1","_c2","_c3","_c4","_c5","_LIMIT_PHI","getPane","_pane","createPane","_canvas","_initCanvas","appendChild","_reset","addLayer","setOpacity","bringToFront","bringToBack","_ctx","getContext","onselectstart","falseFn","onmousemove","onload","bind","_onCanvasLoad","canvas","getSize","_setCanvasPosition","_bearing","_hor_gradient","createLinearGradient","addColorStop","fillStyle","fillRect","_vert_gradient","beginPath","moveTo","lineTo","stroke","_calcInterval","_draw","fire","zoom","getZoom","idx","dict","_interval","Scale","_getRoundNum","containerPointToLatLng","distanceTo","maxWidth","_currZoom","strokeStyle","_create_lat_ticks","_create_lon_ticks","text","textAlign","textBaseline","fillText","to_rad","PI","_merLength","point","bottom","phi","_invmerLength","_draw_lat_tick","to_deg","right","sinPhi2","pow","sin","N","sqrt","dl","cos","_draw_lon_tick","lt","containerPointToLayerPoint","rotatedPointToMapPanePoint","getBoundingClientRect","setPosition","_latLngToCanvasPoint","latlng","_subtract","getPixelOrigin","add","_getMapPanePos","lenght","lineWidth","lam","cos2","sin2","s","psi","control","edgeScale","Map","mergeOptions","edgeScaleControl","addInitHook","addControl"],"sourceRoot":""}